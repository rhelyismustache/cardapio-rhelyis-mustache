<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rhelyi's Mustache - Card√°pio Digital</title>
    <meta name="description" content="Alimenta√ß√£o fitness e saud√°vel com entrega. Refei√ß√µes balanceadas para quem treina, quer emagrecer e busca praticidade.">
    <meta name="keywords" content="alimenta√ß√£o fitness, comida saud√°vel, delivery, refei√ß√µes balanceadas, academia, emagrecimento">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="Rhelyi's Mustache - Card√°pio Digital">
    <meta property="og:description" content="Alimenta√ß√£o fitness e saud√°vel com entrega. Refei√ß√µes balanceadas para quem treina, quer emagrecer e busca praticidade.">
    <meta property="og:image" content="">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="Rhelyi's Mustache - Card√°pio Digital">
    <meta property="twitter:description" content="Alimenta√ß√£o fitness e saud√°vel com entrega. Refei√ß√µes balanceadas para quem treina, quer emagrecer e busca praticidade.">
    <meta property="twitter:image" content="">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'mustache-purple': '#8B5CF6',
                        'mustache-purple-dark': '#7C3AED',
                        'mustache-purple-light': '#A78BFA',
                        'mustache-yellow': '#F59E0B',
                        'mustache-orange': '#FB923C',
                        'mustache-red': '#EF4444',
                        'mustache-red-bright': '#F87171',
                        'mustache-black': '#1F2937',
                        'mustache-green': '#10B981',
                        'neon-purple': '#C084FC',
                        'neon-yellow': '#FDE047'
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'bounce-slow': 'bounce 2s infinite',
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.5s ease-out',
                        'glow': 'glow 2s ease-in-out infinite alternate',
                        'neon-pulse': 'neonPulse 1.5s ease-in-out infinite alternate'
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' }
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' }
                        },
                        glow: {
                            '0%': { 
                                boxShadow: '0 0 5px #8B5CF6, 0 0 10px #8B5CF6, 0 0 15px #8B5CF6'
                            },
                            '100%': { 
                                boxShadow: '0 0 10px #8B5CF6, 0 0 20px #8B5CF6, 0 0 30px #8B5CF6'
                            }
                        },
                        neonPulse: {
                            '0%': { 
                                textShadow: '0 0 5px #F59E0B, 0 0 10px #F59E0B, 0 0 15px #F59E0B'
                            },
                            '100%': { 
                                textShadow: '0 0 10px #F59E0B, 0 0 20px #F59E0B, 0 0 30px #F59E0B'
                            }
                        }
                    },
                    boxShadow: {
                        'neon': '0 0 5px currentColor, 0 0 10px currentColor, 0 0 15px currentColor',
                        'neon-lg': '0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor',
                        'card-glow': '0 4px 20px rgba(139, 92, 246, 0.3), 0 0 0 1px rgba(139, 92, 246, 0.1)'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #1F2937 0%, #8B5CF6 50%, #1F2937 100%);
        }
        
        .gradient-bg-enhanced {
            background: linear-gradient(135deg, #0F172A 0%, #1E1B4B 25%, #7C3AED 50%, #1E1B4B 75%, #0F172A 100%);
        }
        
        .card-hover {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 25px 50px -12px rgba(139, 92, 246, 0.4), 
                        0 0 0 1px rgba(139, 92, 246, 0.3),
                        0 0 20px rgba(139, 92, 246, 0.2);
        }
        
        .mustache-icon {
            font-size: 1.5rem;
            color: #8B5CF6;
        }
        
        .pulse-premium {
            animation: pulsePremium 2s infinite;
        }
        
        @keyframes pulsePremium {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
            }
            70% {
                box-shadow: 0 0 0 15px rgba(139, 92, 246, 0);
            }
        }
        
        .fitness-badge {
            background: linear-gradient(45deg, #F59E0B, #EF4444);
            color: white;
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.75rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.4);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .premium-badge {
            background: linear-gradient(45deg, #8B5CF6, #1F2937);
            color: white;
            padding: 6px 14px;
            border-radius: 25px;
            font-size: 0.75rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.4);
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .loading-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #8B5CF6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .price-highlight {
            background: linear-gradient(45deg, #10B981, #059669);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            font-size: 1.5rem;
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.5);
        }

        .category-active {
            background: linear-gradient(45deg, #8B5CF6, #A855F7) !important;
            transform: scale(1.05);
            box-shadow: 0 10px 25px -5px rgba(139, 92, 246, 0.4);
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
        }

        .menu-item-card {
            background: linear-gradient(145deg, #1F2937, #374151);
            border: 2px solid rgba(139, 92, 246, 0.2);
            position: relative;
            overflow: hidden;
        }

        .menu-item-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.1), transparent);
            transition: left 0.5s;
        }

        .menu-item-card:hover::before {
            left: 100%;
        }

        .menu-item-card:hover {
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 30px rgba(139, 92, 246, 0.3);
        }

        .whatsapp-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .whatsapp-btn:hover {
            background: linear-gradient(45deg, #128C7E, #075E54);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        .error-message {
            background: linear-gradient(45deg, #EF4444, #DC2626);
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }

        .success-message {
            background: linear-gradient(45deg, #10B981, #059669);
            color: white;
            padding: 16px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            font-weight: bold;
        }

        .brand-title {
            font-weight: 900;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #F59E0B, #EF4444, #8B5CF6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 30px rgba(245, 158, 11, 0.5);
            animation: neon-pulse 2s ease-in-out infinite alternate;
        }

        .brand-subtitle {
            color: #F59E0B;
            font-weight: 600;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
        }

        .hero-section {
            background: linear-gradient(135deg, #8B5CF6 0%, #EF4444 50%, #F59E0B 100%);
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 30% 50%, rgba(139, 92, 246, 0.3) 0%, transparent 50%),
                        radial-gradient(circle at 70% 50%, rgba(239, 68, 68, 0.3) 0%, transparent 50%);
            animation: glow 3s ease-in-out infinite alternate;
        }

        .category-btn {
            position: relative;
            overflow: hidden;
            font-weight: 600;
            border: 2px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            border-color: rgba(139, 92, 246, 0.6);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        .add-btn {
            background: linear-gradient(45deg, #F59E0B, #FB923C);
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .add-btn:hover {
            background: linear-gradient(45deg, #FB923C, #F59E0B);
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .cart-btn {
            background: linear-gradient(45deg, #F59E0B, #FB923C);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            animation: glow 2s ease-in-out infinite alternate;
        }

        .cart-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }

        .combo-section {
            background: linear-gradient(135deg, #F59E0B 0%, #EF4444 100%);
            position: relative;
            overflow: hidden;
        }

        .combo-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        }

        .modal-backdrop {
            backdrop-filter: blur(8px);
            background: rgba(0, 0, 0, 0.7);
        }

        .modal-content {
            background: linear-gradient(145deg, #1F2937, #374151);
            border: 2px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5),
                        0 0 0 1px rgba(139, 92, 246, 0.1);
        }

        .input-field {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(139, 92, 246, 0.3);
            color: white;
            transition: all 0.3s ease;
        }

        .input-field:focus {
            border-color: #8B5CF6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
            background: rgba(255, 255, 255, 0.15);
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
    </style>
</head>
<body class="bg-black min-h-screen">
    <!-- Header Premium -->
    <header class="gradient-bg-enhanced shadow-2xl sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <!-- Logo ser√° carregado dinamicamente do Google Sheets -->
                    <img id="logoImage" src="https://via.placeholder.com/64x64/8B5CF6/FFFFFF?text=LOGO" alt="Rhelyi's Mustache Logo" class="w-16 h-16 rounded-full shadow-lg object-cover border-2 border-neon-purple animate-glow">
                    
                    <div>
                        <h1 class="brand-title">Rhelyi's Mustache</h1>
                        <p class="brand-subtitle">Alimenta√ß√£o Fitness & Saud√°vel</p>
                        <div class="flex gap-2 mt-2">
                            <span class="fitness-badge">üí™ FITNESS</span>
                            <span class="fitness-badge">ü•ó SAUD√ÅVEL</span>
                            <span class="fitness-badge">üöö DELIVERY</span>
                        </div>
                    </div>
                </div>
                <button id="cartBtn" class="cart-btn relative text-mustache-black px-6 py-3 rounded-full transition-all font-bold shadow-lg">
                    <span class="flex items-center gap-2">
                        üõí Carrinho
                        <span id="cartCount" class="bg-mustache-red text-white rounded-full px-2 py-1 text-xs min-w-[24px] h-6 flex items-center justify-center font-bold">0</span>
                    </span>
                </button>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-4 py-8">
        <!-- Loading State -->
        <div id="loadingState" class="text-center py-12">
            <div class="loading-spinner"></div>
            <p class="text-white text-lg mt-4">Carregando card√°pio delicioso...</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden">
            <div class="error-message">
                <h3 class="text-xl font-bold mb-2">Ops! Algo deu errado</h3>
                <p>N√£o foi poss√≠vel carregar o card√°pio. Tente novamente em alguns instantes.</p>
                <button onclick="loadMenuData()" class="mt-4 bg-white text-red-600 px-6 py-2 rounded-full font-bold hover:bg-gray-100 transition-all">
                    Tentar Novamente
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div id="mainContent" class="hidden">
            <!-- Destaque Fitness -->
            <div class="hero-section text-white rounded-3xl p-8 mb-8 shadow-2xl animate-fade-in relative z-10">
                <div class="text-center relative z-10">
                    <h2 class="text-3xl font-black mb-3">üí™ Alimenta√ß√£o Inteligente para Seus Objetivos</h2>
                    <p class="text-xl opacity-95 font-medium">Refei√ß√µes balanceadas para quem treina, quer emagrecer e busca praticidade</p>
                    <div class="mt-6 flex justify-center gap-4 text-sm flex-wrap">
                        <span class="bg-white bg-opacity-25 px-4 py-2 rounded-full font-semibold border border-white border-opacity-30">üèãÔ∏è Academia</span>
                        <span class="bg-white bg-opacity-25 px-4 py-2 rounded-full font-semibold border border-white border-opacity-30">‚öñÔ∏è Emagrecimento</span>
                        <span class="bg-white bg-opacity-25 px-4 py-2 rounded-full font-semibold border border-white border-opacity-30">‚è∞ Praticidade</span>
                        <span class="bg-white bg-opacity-25 px-4 py-2 rounded-full font-semibold border border-white border-opacity-30">üå± Vegetariano</span>
                    </div>
                </div>
            </div>

            <!-- Categorias -->
            <div class="mb-8">
                <div id="categoryButtons" class="flex flex-wrap gap-3 justify-center">
                    <!-- Categorias ser√£o inseridas dinamicamente -->
                </div>
            </div>

            <!-- Menu Items -->
            <div id="menuItems" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Items ser√£o inseridos aqui pelo JavaScript -->
            </div>

            <!-- Se√ß√£o de Combos Personalizados -->
            <div class="mt-16 combo-section text-white rounded-3xl p-10 shadow-2xl animate-slide-up relative">
                <div class="text-center relative z-10">
                    <h3 class="text-3xl font-black mb-4">üéØ Combos Personalizados</h3>
                    <p class="text-xl mb-8 font-medium">Planos semanais e mensais sob medida para seus objetivos!</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div class="bg-white bg-opacity-20 rounded-2xl p-6 border border-white border-opacity-30">
                            <h4 class="font-black text-xl mb-3">üìÖ Combo Semanal</h4>
                            <p class="opacity-90 font-medium">7 refei√ß√µes personalizadas para sua rotina de treinos</p>
                        </div>
                        <div class="bg-white bg-opacity-20 rounded-2xl p-6 border border-white border-opacity-30">
                            <h4 class="font-black text-xl mb-3">üìÜ Combo Mensal</h4>
                            <p class="opacity-90 font-medium">Plano completo com acompanhamento nutricional</p>
                        </div>
                    </div>
                    <button onclick="openComboWhatsApp()" class="mt-8 bg-white text-mustache-red px-10 py-4 rounded-full font-black hover:bg-gray-100 transition-all shadow-lg text-lg">
                        üí¨ Solicitar Combo Personalizado
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal do Carrinho -->
    <div id="cartModal" class="fixed inset-0 modal-backdrop z-50 hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="modal-content rounded-3xl max-w-lg w-full max-h-[85vh] overflow-hidden shadow-2xl">
                <div class="gradient-bg-enhanced p-6 text-white">
                    <div class="flex justify-between items-center">
                        <h2 class="text-2xl font-black">üõí Seu Pedido Fitness</h2>
                        <button id="closeCart" class="text-white hover:text-gray-300 text-3xl font-bold">&times;</button>
                    </div>
                </div>
                
                <div id="cartItems" class="p-6 max-h-64 overflow-y-auto">
                    <!-- Items do carrinho aqui -->
                </div>
                
                <div class="p-6 border-t bg-gray-800 border-mustache-purple">
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-white mb-2">üë§ Nome:</label>
                        <input type="text" id="customerName" class="input-field w-full px-4 py-3 rounded-lg focus:outline-none" placeholder="Seu nome completo">
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-white mb-2">üìç Endere√ßo de entrega:</label>
                        <textarea id="customerAddress" class="input-field w-full px-4 py-3 rounded-lg focus:outline-none" rows="3" placeholder="Rua, n√∫mero, bairro, cidade..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-bold text-white mb-2">üí¨ Observa√ß√µes (opcional):</label>
                        <textarea id="customerNotes" class="input-field w-full px-4 py-3 rounded-lg focus:outline-none" rows="2" placeholder="Alguma observa√ß√£o especial sobre seu pedido..."></textarea>
                    </div>
                    
                    <div class="flex justify-between items-center mb-6 p-4 bg-mustache-purple text-white rounded-lg">
                        <span class="text-xl font-black">Total: R$ <span id="cartTotal">0,00</span></span>
                    </div>
                    
                    <button id="sendWhatsApp" class="w-full whatsapp-btn text-white py-4 rounded-lg font-black text-lg shadow-lg">
                        üì± Finalizar Pedido via WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // üî• CONFIGURA√á√ïES PRINCIPAIS - ALTERE AQUI
        // URL do Google Sheets publicado como CSV
        const GOOGLE_SHEETS_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vRFja7w_0mQO2sbK4-AHAiOSKQpmJ2I2W6TwzwbXBekkbgH8m0B77jaXcvu3mJhwMp9-9EPVUx345GR/pub?gid=0&single=true&output=csv";
        
        // N√∫mero padr√£o do WhatsApp (ser√° sobrescrito pelos dados do Google Sheets se dispon√≠vel)
        let defaultWhatsAppNumber = "+5511978361049";

        // Vari√°veis globais
        let menuData = [];
        let cart = [];
        let currentCategory = 'all';

        // Fun√ß√£o para carregar dados do Google Sheets
        async function loadMenuData() {
            try {
                document.getElementById('loadingState').classList.remove('hidden');
                document.getElementById('errorState').classList.add('hidden');
                document.getElementById('mainContent').classList.add('hidden');

                // Se n√£o h√° URL configurado, usar dados de exemplo
                if (GOOGLE_SHEETS_CSV_URL === "COLE_AQUI_O_URL_DO_SEU_GOOGLE_SHEETS") {
                    console.log("Usando dados de exemplo - Configure o URL do Google Sheets");
                    loadExampleData();
                    return;
                }

                const response = await fetch(GOOGLE_SHEETS_CSV_URL);
                if (!response.ok) {
                    throw new Error('Erro ao carregar dados');
                }

                const csvText = await response.text();
                const parsedData = parseCSV(csvText);
                
                if (parsedData.length === 0) {
                    throw new Error('Nenhum dado encontrado');
                }

                menuData = parsedData;
                
                // Atualizar n√∫mero do WhatsApp se dispon√≠vel nos dados
                if (menuData.length > 0 && menuData[0].whatsapp_number) {
                    defaultWhatsAppNumber = menuData[0].whatsapp_number;
                }

                renderCategories();
                renderMenuItems();
                
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('mainContent').classList.remove('hidden');
                
            } catch (error) {
                console.error('Erro ao carregar dados:', error);
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('errorState').classList.remove('hidden');
            }
        }

        // Fun√ß√£o para analisar CSV
        function parseCSV(csvText) {
            const lines = csvText.trim().split('\n');
            const headers = lines[0].split(',').map(h => h.trim().replace(/"/g, ''));
            const data = [];

            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split(',').map(v => v.trim().replace(/"/g, ''));
                if (values.length === headers.length) {
                    const item = {};
                    headers.forEach((header, index) => {
                        item[header] = values[index];
                    });
                    
                    // Converter price para n√∫mero
                    if (item.price) {
                        item.price = parseFloat(item.price) || 0;
                    }
                    
                    // Converter id para n√∫mero
                    if (item.id) {
                        item.id = parseInt(item.id) || 0;
                    }
                    
                    data.push(item);
                }
            }

            return data;
        }

        // Dados de exemplo (fallback)
        function loadExampleData() {
            menuData = [
                { id: 1, name: "Frango Grelhado Premium", category: "aves", price: 25.90, description: "Peito de frango grelhado temperado com ervas naturais e especiarias selecionadas", protein: "Alta", calories: "Baixa", image_url: "https://via.placeholder.com/300x200/8B5CF6/FFFFFF?text=Frango+Grelhado", whatsapp_number: "+5511978361049" },
                { id: 2, name: "Salm√£o Grelhado", category: "peixes", price: 35.90, description: "Fil√© de salm√£o grelhado com temperos especiais e acompanhamentos fitness", protein: "Alta", calories: "Baixa", image_url: "https://via.placeholder.com/300x200/F59E0B/FFFFFF?text=Salmao+Grelhado", whatsapp_number: "+5511978361049" },
                { id: 3, name: "Salada Caesar Fitness", category: "saladas", price: 18.90, description: "Salada caesar com frango grelhado, molho especial e ingredientes frescos", protein: "M√©dia", calories: "Baixa", image_url: "https://via.placeholder.com/300x200/10B981/FFFFFF?text=Salada+Caesar", whatsapp_number: "+5511978361049" },
                { id: 4, name: "Picanha Premium", category: "bovinos", price: 42.90, description: "Picanha suculenta grelhada na brasa com temperos especiais", protein: "Alta", calories: "M√©dia", image_url: "https://via.placeholder.com/300x200/EF4444/FFFFFF?text=Picanha+Premium", whatsapp_number: "+5511978361049" },
                { id: 5, name: "Bowl Vegetariano", category: "vegetarianos", price: 22.90, description: "Bowl completo com quinoa, legumes grelhados e molho tahine", protein: "M√©dia", calories: "Baixa", image_url: "https://via.placeholder.com/300x200/10B981/FFFFFF?text=Bowl+Vegetariano", whatsapp_number: "+5511978361049" }
            ];

            renderCategories();
            renderMenuItems();
            
            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        }

        // Fun√ß√£o para renderizar categorias
        function renderCategories() {
            const categories = [...new Set(menuData.map(item => item.category))];
            const categoryButtons = document.getElementById('categoryButtons');
            
            categoryButtons.innerHTML = `
                <button class="category-btn category-active bg-mustache-purple text-white px-8 py-4 rounded-full hover:bg-purple-600 transition-all font-bold shadow-lg" data-category="all">
                    Todos os Pratos
                </button>
            `;

            const categoryIcons = {
                'aves': 'üêî',
                'peixes': 'üêü',
                'bovinos': 'ü•©',
                'suinos': 'üê∑',
                'vegetarianos': 'üå±',
                'massas': 'üçù',
                'premium': '‚≠ê',
                'saladas': 'ü•ó'
            };

            const categoryNames = {
                'aves': 'Aves',
                'peixes': 'Peixes & Frutos do Mar',
                'bovinos': 'Bovinos',
                'suinos': 'Su√≠nos',
                'vegetarianos': 'Vegetarianos',
                'massas': 'Monte Sua Massa',
                'premium': 'Sele√ß√£o Premium',
                'saladas': 'Saladas do Chef'
            };

            categories.forEach(category => {
                const icon = categoryIcons[category] || 'üçΩÔ∏è';
                const categoryName = categoryNames[category] || category.charAt(0).toUpperCase() + category.slice(1);
                
                categoryButtons.innerHTML += `
                    <button class="category-btn bg-gray-800 text-white px-8 py-4 rounded-full hover:bg-gray-700 transition-all font-bold" data-category="${category}">
                        ${icon} ${categoryName}
                    </button>
                `;
            });

            // Adicionar event listeners
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    currentCategory = e.target.dataset.category;
                    
                    // Atualizar bot√µes ativos
                    document.querySelectorAll('.category-btn').forEach(b => {
                        b.classList.remove('category-active');
                        b.classList.add('bg-gray-800');
                    });
                    
                    e.target.classList.add('category-active');
                    e.target.classList.remove('bg-gray-800');
                    
                    renderMenuItems();
                });
            });
        }

        // Fun√ß√£o para renderizar itens do menu
        function renderMenuItems() {
            const menuItems = document.getElementById('menuItems');
            const filteredItems = currentCategory === 'all' 
                ? menuData 
                : menuData.filter(item => item.category === currentCategory);

            menuItems.innerHTML = '';

            filteredItems.forEach(item => {
                const itemCard = document.createElement('div');
                itemCard.className = 'menu-item-card rounded-3xl overflow-hidden shadow-xl card-hover animate-fade-in';
                
                itemCard.innerHTML = `
                    <div class="relative">
                        <img src="${item.image_url || 'https://via.placeholder.com/300x200/8B5CF6/FFFFFF?text=' + encodeURIComponent(item.name)}" 
                             alt="${item.name}" 
                             class="w-full h-52 object-cover"
                             onerror="this.src='https://via.placeholder.com/300x200/8B5CF6/FFFFFF?text=' + encodeURIComponent('${item.name}')">
                        <div class="absolute top-4 right-4">
                            <span class="premium-badge">${item.protein || 'Prote√≠na'}</span>
                        </div>
                        <div class="absolute bottom-4 left-4">
                            <span class="fitness-badge">${item.calories || 'Calorias'}</span>
                        </div>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-black text-white mb-3">${item.name}</h3>
                        <p class="text-gray-300 text-sm mb-6 leading-relaxed">${item.description || 'Deliciosa refei√ß√£o preparada com ingredientes selecionados'}</p>
                        <div class="flex justify-between items-center">
                            <span class="price-highlight">R$ ${item.price ? item.price.toFixed(2).replace('.', ',') : '0,00'}</span>
                            <button onclick="addToCart(${item.id})" class="add-btn text-mustache-black px-6 py-3 rounded-full transition-all font-bold shadow-lg">
                                Adicionar
                            </button>
                        </div>
                    </div>
                `;

                menuItems.appendChild(itemCard);
            });
        }

        // Fun√ß√£o para adicionar ao carrinho
        function addToCart(itemId) {
            const item = menuData.find(i => i.id === itemId);
            if (!item) return;

            const existingItem = cart.find(i => i.id === itemId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...item, quantity: 1 });
            }

            updateCartUI();
            
            // Feedback visual
            const button = event.target;
            const originalText = button.textContent;
            button.textContent = 'Adicionado!';
            button.classList.add('bg-mustache-green');
            
            setTimeout(() => {
                button.textContent = originalText;
                button.classList.remove('bg-mustache-green');
            }, 1000);
        }

        // Fun√ß√£o para atualizar UI do carrinho
        function updateCartUI() {
            const cartCount = document.getElementById('cartCount');
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;

            if (totalItems > 0) {
                cartCount.classList.add('animate-bounce-slow');
                setTimeout(() => cartCount.classList.remove('animate-bounce-slow'), 1000);
            }
        }

        // Fun√ß√£o para renderizar carrinho
        function renderCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');

            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-gray-400 text-center py-8">Seu carrinho est√° vazio</p>';
                cartTotal.textContent = '0,00';
                return;
            }

            let total = 0;
            cartItems.innerHTML = '';

            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;

                const cartItem = document.createElement('div');
                cartItem.className = 'flex justify-between items-center py-4 border-b border-gray-700';
                cartItem.innerHTML = `
                    <div class="flex-1">
                        <h4 class="text-white font-bold">${item.name}</h4>
                        <p class="text-gray-400 text-sm">R$ ${item.price.toFixed(2).replace('.', ',')} cada</p>
                    </div>
                    <div class="flex items-center gap-3">
                        <button onclick="updateQuantity(${item.id}, -1)" class="bg-gray-700 text-white w-8 h-8 rounded-full hover:bg-gray-600 transition-all">-</button>
                        <span class="text-white font-bold">${item.quantity}</span>
                        <button onclick="updateQuantity(${item.id}, 1)" class="bg-mustache-purple text-white w-8 h-8 rounded-full hover:bg-purple-600 transition-all">+</button>
                        <button onclick="removeFromCart(${item.id})" class="bg-mustache-red text-white w-8 h-8 rounded-full hover:bg-red-600 transition-all ml-2">√ó</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });

            cartTotal.textContent = total.toFixed(2).replace('.', ',');
        }

        // Fun√ß√£o para atualizar quantidade
        function updateQuantity(itemId, change) {
            const item = cart.find(i => i.id === itemId);
            if (!item) return;

            item.quantity += change;
            if (item.quantity <= 0) {
                removeFromCart(itemId);
                return;
            }

            updateCartUI();
            renderCart();
        }

        // Fun√ß√£o para remover do carrinho
        function removeFromCart(itemId) {
            cart = cart.filter(i => i.id !== itemId);
            updateCartUI();
            renderCart();
        }

        // Fun√ß√£o para abrir combo WhatsApp
        function openComboWhatsApp() {
            const message = encodeURIComponent(`Ol√°! Gostaria de solicitar um combo personalizado do Rhelyi's Mustache. Podem me ajudar com as op√ß√µes dispon√≠veis?`);
            window.open(`https://wa.me/${defaultWhatsAppNumber.replace('+', '')}?text=${message}`, '_blank');
        }

        // Fun√ß√£o para enviar pedido via WhatsApp
        function sendWhatsAppOrder() {
            const customerName = document.getElementById('customerName').value.trim();
            const customerAddress = document.getElementById('customerAddress').value.trim();
            const customerNotes = document.getElementById('customerNotes').value.trim();

            if (!customerName || !customerAddress) {
                alert('Por favor, preencha seu nome e endere√ßo de entrega.');
                return;
            }

            if (cart.length === 0) {
                alert('Seu carrinho est√° vazio.');
                return;
            }

            let message = `üçΩÔ∏è *PEDIDO RHELYI'S MUSTACHE*\n\n`;
            message += `üë§ *Cliente:* ${customerName}\n`;
            message += `üìç *Endere√ßo:* ${customerAddress}\n\n`;
            message += `üõí *Itens do Pedido:*\n`;

            let total = 0;
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                message += `‚Ä¢ ${item.quantity}x ${item.name} - R$ ${itemTotal.toFixed(2).replace('.', ',')}\n`;
            });

            message += `\nüí∞ *Total: R$ ${total.toFixed(2).replace('.', ',')}*\n`;

            if (customerNotes) {
                message += `\nüí¨ *Observa√ß√µes:* ${customerNotes}\n`;
            }

            message += `\nüöö Aguardo confirma√ß√£o do pedido e informa√ß√µes sobre entrega!`;

            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/${defaultWhatsAppNumber.replace('+', '')}?text=${encodedMessage}`, '_blank');
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadMenuData();

            // Carrinho
            document.getElementById('cartBtn').addEventListener('click', () => {
                document.getElementById('cartModal').classList.remove('hidden');
                renderCart();
            });

            document.getElementById('closeCart').addEventListener('click', () => {
                document.getElementById('cartModal').classList.add('hidden');
            });

            document.getElementById('sendWhatsApp').addEventListener('click', sendWhatsAppOrder);

            // Fechar modal clicando fora
            document.getElementById('cartModal').addEventListener('click', (e) => {
                if (e.target.id === 'cartModal') {
                    document.getElementById('cartModal').classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>

